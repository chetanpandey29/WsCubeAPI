IF EXISTS(SELECT 1 FROM USERINFO UR INNER JOIN ROLES R ON R.ROLEID = UR.DEFAULTROLEID
AND R.ALLSITES = 1 WHERE UR.USERID = @USERID AND R.STATUS=1)
BEGIN
SELECT ROLEID,ROLENAME FROM ROLES WHERE STATUS = 1
END
ELSE
BEGIN
SELECT ROLEID,ROLENAME FROM ROLES R
WHERE STATUS = 1 AND ALLSITES != 1 AND ROLEID != 1
END