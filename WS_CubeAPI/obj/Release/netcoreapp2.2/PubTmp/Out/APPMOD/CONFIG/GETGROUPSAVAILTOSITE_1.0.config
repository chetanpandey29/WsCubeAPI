--GETGROUPSAVAILTOSITE_1.0
SELECT '<option value="'+CAST(GROUPID AS VARCHAR(32))+'">'+ENTITYVALUE+'</option>' AS 'data()' FROM GROUPS G
INNER JOIN ENTITYTRANSLATION ET ON ET.ENTITYID=G.GROUPID AND ET.LANGUAGEID=@LANGUAGEID AND ENTITYTYPE='UGP_TYPE'
WHERE GROUPID NOT IN (SELECT GROUPID FROM SITEGROUPS WHERE GROUPTYPEID = @GROUPTYPEID AND SITEID = @SITEID AND STATUS=1)
AND G.STATUS = 1 AND GROUPTYPEID = @GROUPTYPEID
ORDER BY ENTITYVALUE
FOR XML PATH('')