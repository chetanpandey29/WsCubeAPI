--INSERTCHECKLISTSETUP_1.0
DECLARE @CC_TIMESTAMP DATETIME
SET @CC_TIMESTAMP=GETDATE()

DECLARE @CHECKLISTSETUPID INT
IF EXISTS(SELECT 1 FROM CHECKLISTSETUP WHERE SETUPNAME=@SETUPNAME AND [STATUS]!=2 ) SELECT -1
ELSE
BEGIN
INSERT INTO CHECKLISTSETUP(COMPANYID,SETUPNAME,ALLSITES,[STATUS],ALLSAFECHECK,CATEGORYTYPE,COPYFROM,
CREATEDBY,URL,CREATEDDATE,ENABLESAFEUNSAFE) VALUES
(@COMPANYID,@SETUPNAME,@ALLSITES,@STATUS,@ALLSAFECHECK,1,@COPYFROM,@CREATEDBY,@URL,@CC_TIMESTAMP,@ENABLESAFEUNSAFE)
SELECT @CHECKLISTSETUPID=@@IDENTITY

IF(@ALLSITES=0)
BEGIN
INSERT INTO CHECKLISTSETUPSITES(CHECKLISTSETUPID,SITEID,STATUS,UPDATEDBY,UPDATEDDATE)
SELECT @CHECKLISTSETUPID,(SELECT DEFAULTSITEID FROM USERINFO WHERE USERID= @CREATEDBY),1,@CREATEDBY,@CC_TIMESTAMP
END

IF @COPYFROM>0
BEGIN
INSERT INTO CHECKLISTSETUPCATEGORYASSIGNMENTS(CHECKLISTSETUPID,MAINCATEGORYID,SUBCATEGORYID,MAINISASSIGNED,
SUBISASSIGNED,MAINSEQUENCE,SUBSEQUENCE,STATUS,UPDATEDBY,UPDATEDDATE)
SELECT @CHECKLISTSETUPID,MAINCATEGORYID,SUBCATEGORYID,MAINISASSIGNED,SUBISASSIGNED,MAINSEQUENCE,SUBSEQUENCE,STATUS,UPDATEDBY,UPDATEDDATE FROM CHECKLISTSETUPCATEGORYASSIGNMENTS
WHERE CHECKLISTSETUPID=@COPYFROM
END
SELECT @CHECKLISTSETUPID
END

INSERT INTO dbo.AUDIT(TABLENAME,TRANS,STAMP,LASTUPDATEDBY,DATA)
SELECT 'CHECKLISTSETUP/CHECKLISTSETUPCATEGORYASSIGNMENTS','INSERT-INSERTCHECKLISTSETUP_1.0',@CC_TIMESTAMP,@CREATEDBY,NULL