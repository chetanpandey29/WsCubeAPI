DECLARE @CC_TIMESTAMP DATETIME
SET @CC_TIMESTAMP=GETDATE()

UPDATE GROUPS SET [STATUS]=2,UPDATEDBY=@UPDATEDBY, UPDATEDDATE=@CC_TIMESTAMP
WHERE GROUPTYPEID=@GROUPTYPEID AND GROUPID IN (SELECT RESULT FROM DBO.CSVTOTABLE(@GROUPID))

--SCHEDULEREPORTS
DELETE FROM SCHEDULEASSIGNMENTS WHERE OPTIONID BETWEEN 22 AND 33 AND OPTIONVALUE IN (SELECT RESULT FROM DBO.CSVTOTABLE(@GROUPID))

UPDATE USERGROUPS SET STATUS=0,UPDATEDBY=@UPDATEDBY, UPDATEDDATE=@CC_TIMESTAMP WHERE GROUPTYPEID = @GROUPTYPEID AND GROUPID IN (SELECT RESULT FROM DBO.CSVTOTABLE(@GROUPID))

UPDATE ENTITYTRANSLATION SET STATUS=2,UPDATEDBY=@UPDATEDBY, UPDATEDDATE=@CC_TIMESTAMP WHERE PARENTID=@GROUPTYPEID AND ENTITYID IN(SELECT RESULT FROM DBO.CSVTOTABLE(@GROUPID)) AND ENTITYTYPE='UGP_TYPE'
SELECT 1

INSERT INTO dbo.AUDIT(TABLENAME,TRANS,STAMP,LASTUPDATEDBY,DATA)
SELECT 'GROUPS/USERGROUPS/ENTITYTRANSLATION','DELETE-DELETEGROUPS_1.0',@CC_TIMESTAMP,@UPDATEDBY,NULL
