DECLARE @R_TIMESTAMP DATETIME
SET @R_TIMESTAMP=GETDATE()
IF EXISTS ( SELECT 1 FROM REDFLAGS WHERE REDFLAGNAME=@REDFLAGNAME AND STATUS!=2 ) SELECT -1
ELSE
BEGIN

INSERT INTO [REDFLAGS]
([COMPANYID]
,[REDFLAGNAME]
,[SITEID]
,[MAINCATEGORYID]
,[SUBCATEGORYID]
,[AREAID]
,[SUBAREAID]
,[OBSERVERID]
,[METRIC]
,[TRIGGER]
,[VALUE]
,[CHECKLISTSETUPID]
,[STATUS]
,[CREATEDBY]
,[CREATEDDATE])

VALUES
(@COMPANYID
,@REDFLAGNAME
,@SITEID
,@MAINCATEGORYID
,@SUBCATEGORYID
,@AREAID
,@SUBAREAID
,@OBSERVERID
,@METRIC
,@TRIGGER
,@VALUE
,@CARDVERSIONID
,@STATUS
,@CREATEDBY
,@R_TIMESTAMP)

SELECT @@IDENTITY

END

