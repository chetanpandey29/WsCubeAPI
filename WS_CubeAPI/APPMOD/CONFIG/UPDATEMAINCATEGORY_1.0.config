DECLARE @CC_TIMESTAMP DATETIME
SET @CC_TIMESTAMP=GETDATE()


IF EXISTS ( SELECT 1 FROM ENTITYTRANSLATION WHERE ENTITYTYPE='MAIN_CTG' AND ENTITYVALUE=@MAINCATEGORYNAME AND PARENTID!=@MAINCATEGORYID AND [STATUS]!=2) SELECT '-1'
ELSE
BEGIN
UPDATE MAINCATEGORIES SET UPDATEDBY=@UPDATEDBY,UPDATEDDATE=@CC_TIMESTAMP
WHERE MAINCATEGORYID=@MAINCATEGORYID

UPDATE ENTITYTRANSLATION SET ENTITYVALUE=@MAINCATEGORYNAME,UPDATEDBY=@UPDATEDBY,UPDATEDDATE=@CC_TIMESTAMP
WHERE PARENTID = @MAINCATEGORYID AND ENTITYTYPE='MAIN_CTG' AND LANGUAGEID = @LANGUAGEID

SELECT @MAINCATEGORYID

END

INSERT INTO dbo.AUDIT(TABLENAME,TRANS,STAMP,LASTUPDATEDBY,DATA)
SELECT 'ENTITYTRANSLATION','UPDATE-UPDATEMAINCATEGORY_1.0',@CC_TIMESTAMP,@UPDATEDBY,NULL
