DECLARE @M_TIMESTAMP DATETIME
SET @M_TIMESTAMP=GETDATE()

IF EXISTS ( SELECT 1 FROM ENTITYTRANSLATION WHERE ENTITYTYPE='MAIN_CTG' AND ENTITYVALUE=@MAINCATEGORYNAME AND STATUS!=2 ) SELECT -1
ELSE
BEGIN
INSERT INTO dbo.MAINCATEGORIES(COMPANYID,MAINCATEGORYNAME,STATUS,CREATEDBY,CREATEDDATE) VALUES
(@COMPANYID,@MAINCATEGORYNAME,@STATUS,@CREATEDBY,@M_TIMESTAMP)

SELECT @@IDENTITY

INSERT INTO ENTITYTRANSLATION(LANGUAGEID,PARENTID,ENTITYID,ENTITYNAME,ENTITYVALUE,ENTITYTYPE,CREATEDBY,CREATEDDATE,STATUS)
SELECT LANGUAGEID, (SELECT MAX(MAINCATEGORYID) FROM MAINCATEGORIES WHERE MAINCATEGORYNAME=@MAINCATEGORYNAME),(SELECT MAX(MAINCATEGORYID) FROM MAINCATEGORIES WHERE MAINCATEGORYNAME=@MAINCATEGORYNAME),@MAINCATEGORYNAME,@MAINCATEGORYNAME,'MAIN_CTG',@CREATEDBY,@M_TIMESTAMP,@STATUS
FROM LANGUAGES
ORDER BY LANGUAGEID

END
